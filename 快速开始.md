# 🚀 BigWorld Exporter - 快速开始指南

**版本**: v1.0.0 (重构版)  
**预计阅读时间**: 5分钟  
**目标**: 快速掌握插件的核心功能

---

## 📦 安装

### 方法1：直接复制（推荐）
```bash
# 将插件文件夹复制到Blender的addons_core目录
# 路径示例（Windows）:
D:\Program Files\Blender Foundation\Blender 4.5\4.5\scripts\addons_core\blender_bigworld_exporter\
```

### 方法2：从Blender安装
1. Edit → Preferences → Add-ons
2. Install... → 选择插件zip文件
3. 启用"BigWorld Exporter"

---

## ⚙️ 基础配置

### 1. 设置导出路径
1. Edit → Preferences → Add-ons
2. 找到"BigWorld Exporter"
3. 设置"导出根目录"（如：`D:/BwGameWork/res/`）
4. 保存设置

### 2. 检查UI
1. 在3D视口按`N`键
2. 找到"BigWorld"标签页
3. 确认显示"BigWorld 对象属性"面板

---

## 🎯 核心功能速览

### 功能1：静态模型导出
**用途**: 导出无骨骼、无动画的模型（建筑、道具等）

**步骤**:
1. 选择Mesh对象
2. 导出类型：**静态模型**
3. 资源ID：`my_prop`
4. File → Export → BigWorld
5. 选择目录 → 导出

**生成文件**:
```
my_prop.primitives  # 几何数据
my_prop.visual      # 渲染数据
my_prop.model       # 模型定义
```

---

### 功能2：蒙皮模型导出（含硬点）
**用途**: 导出带骨骼但无动画的模型（角色身体、武器等）

**步骤**:
1. 选择Mesh对象（需有Armature修改器）
2. 导出类型：**蒙皮模型**
3. 资源ID：`sword_01`
4. **添加硬点**（可选）:
   - 点击硬点管理区域的`+`
   - 名称：`HP_Grip`
   - 类型：武器挂载
   - 绑定骨骼：`Handle`
5. 导出

**生成文件**:
```
sword_01.primitives  # 几何数据（含蒙皮）
sword_01.visual      # 渲染数据（含骨骼层级）
sword_01.model       # 模型定义（含硬点）
```

**硬点用途**: 在BigWorld中，可以通过硬点将武器挂载到角色手上

---

### 功能3：角色动画导出（含Action和硬点）
**用途**: 导出完整的角色模型（含骨骼、动画、动作控制）

**步骤**:
1. 选择Mesh对象（需有Armature和Action）
2. 导出类型：**角色动画**
3. 资源ID：`hero_character`

4. **添加Action**:
   - 点击Action管理区域的`+`
   - 配置第一个Action:
     - 名称：`WalkForward`
     - 关联动画：`walk`（Blender中的Action名）
     - 混合播放：✅
     - 动画轨道：`0`
   - 添加更多Action（Run, Attack等）

5. **添加硬点**:
   - 点击硬点管理区域的`+`
   - 配置第一个硬点:
     - 名称：`HP_RightHand`
     - 类型：武器挂载
     - 绑定骨骼：`RightHand`
   - 添加更多硬点（LeftHand, Head等）

6. 导出

**生成文件**:
```
hero_character.primitives       # 几何数据（含蒙皮）
hero_character.visual           # 渲染数据（含骨骼层级）
hero_character.model            # 模型定义（含Action和硬点）
animations/
  ├─ walk.animation             # 走路动画
  ├─ run.animation              # 跑步动画
  └─ attack.animation           # 攻击动画
```

**Action用途**: 在BigWorld中，通过Action名称控制角色播放不同动作  
**硬点用途**: 将武器、装备挂载到角色的特定位置

---

## 📖 关键概念

### 概念1：导出类型
| 类型 | 骨骼 | 动画 | 硬点 | Action | 用途 |
|------|------|------|------|--------|------|
| 静态模型 | ❌ | ❌ | ❌ | ❌ | 建筑、道具 |
| 蒙皮模型 | ✅ | ❌ | ✅ | ❌ | 角色组件、武器 |
| 角色动画 | ✅ | ✅ | ✅ | ✅ | 完整角色 |

### 概念2：硬点（Hardpoint）
**定义**: 模型上的挂载点，用于附加其他对象

**类型**:
- 🗡️ **武器挂载** - 挂载武器（剑、枪等）
- 🛡️ **装备挂载** - 挂载装备（盾牌、背包等）
- ✨ **特效点** - 播放特效（光环、粒子等）
- 🎯 **交互点** - 触发交互（按钮、开关等）

**示例**:
```
角色模型:
├─ HP_RightHand  → 挂载右手武器
├─ HP_LeftHand   → 挂载左手盾牌
├─ HP_Head       → 挂载头盔
└─ HP_Back       → 挂载背包
```

### 概念3：Action
**定义**: 游戏中的动作标识，关联Blender的Animation

**工作流程**:
```
Blender Action: "walk"
      ↓
导出为: animations/walk.animation
      ↓
在Model中定义Action: "WalkForward" → "walk"
      ↓
游戏中调用: character.playAction("WalkForward")
```

**参数说明**:
- **名称** - 游戏中使用的Action标识（如：WalkForward）
- **关联动画** - Blender中的Action名称（如：walk）
- **混合播放** - 是否支持动画混合过渡
- **动画轨道** - 动画播放的轨道索引（0-10）
  - 轨道0：常用于移动动画（可混合）
  - 轨道1：常用于攻击动画（不混合）

---

## 💡 实用技巧

### 技巧1：快速设置资源ID
- 资源ID为空时，自动使用对象名称
- 建议使用有意义的名称（如：`character_hero` 而不是 `Cube.001`）

### 技巧2：硬点命名规范
- 使用前缀 `HP_` （HardPoint）
- 描述挂载位置（如：`HP_RightHand`, `HP_LeftShoulder`）

### 技巧3：Action命名规范
- 使用驼峰命名（如：`WalkForward`, `RunBackward`）
- 与动画功能对应（而非Blender的Action名）

### 技巧4：导出前检测
- 点击"运行导出前检测"按钮
- 自动检查配置是否正确
- 避免导出错误

### 技巧5：批量处理
- 选择多个对象
- 导出模式选择"全部"
- 一次性导出所有对象

---

## 🎓 进阶示例

### 示例1：创建可挂载武器的角色

**场景**: 角色可以装备不同的武器

**步骤**:

1. **导出角色主体**:
   ```
   对象: Character_Body
   导出类型: 角色动画
   硬点:
     - HP_RightHand → RightHand骨骼
     - HP_LeftHand → LeftHand骨骼
   Action:
     - Idle → idle
     - Walk → walk
   ```

2. **导出武器**:
   ```
   对象: Sword_01
   导出类型: 蒙皮模型
   硬点:
     - HP_Grip → Handle骨骼（握持点）
   ```

3. **在BigWorld中使用**:
   ```python
   # 加载角色
   character = BigWorld.entities['Hero']
   
   # 挂载武器到右手
   sword = character.model.node('HP_RightHand').attach('sword_01.model')
   
   # 播放动作
   character.playAction('Walk')
   ```

---

### 示例2：多部件角色系统

**场景**: 角色由多个组件组成（头、身体、腿等）

**步骤**:

1. **导出基础骨架（父模型）**:
   ```
   对象: Character_Base
   导出类型: 角色动画
   资源ID: base
   包含: 完整骨架 + 所有动画
   ```

2. **导出各部件（子模型）**:
   ```
   对象: Character_Head
   导出类型: 蒙皮模型
   父模型: base （继承骨架和动画）
   
   对象: Character_Body
   导出类型: 蒙皮模型
   父模型: base
   ```

3. **在BigWorld中组合**:
   ```python
   # 加载基础骨架
   character = BigWorld.Model('base.model')
   
   # 附加各部件
   character.attachModel('head.model')
   character.attachModel('body.model')
   character.attachModel('legs.model')
   
   # 部件共享骨架和动画
   character.playAction('Walk')  # 所有部件一起动画
   ```

---

## ❓ 常见问题

### Q1: 导出后模型显示异常（"乱模"）？
**A**: 检查以下几点：
- 确认Armature修改器绑定正确
- 检查骨骼权重是否正确
- 蒙皮模型必须选择"蒙皮模型"或"角色动画"类型

### Q2: Hardpoint没有出现在导出的.model中？
**A**: 
- 确认导出类型为"蒙皮模型"或"角色动画"
- 检查硬点配置是否完整（名称、骨骼）
- 查看audit.log日志文件

### Q3: Action无法在BigWorld中使用？
**A**: 
- 确认Action名称与游戏代码一致
- 检查关联的动画文件是否正确导出
- 确认.model文件中包含action标签

### Q4: 如何查看详细的导出日志？
**A**: 
- 导出目录下查看`audit.log`文件
- Blender的Python控制台（Window → Toggle System Console）

---

## 📚 相关文档

- **详细使用说明** - `20251019新插件方案.md`
- **测试指南** - `测试指南.md`
- **重构报告** - `重构完成报告.md`
- **架构设计** - `插件架构重构方案.md`

---

## 🎉 开始创作吧！

现在你已经掌握了BigWorld Exporter的核心功能：

✅ **静态模型** - 导出建筑和道具  
✅ **蒙皮模型** - 导出带骨骼的模型  
✅ **角色动画** - 导出完整的角色系统  
✅ **硬点系统** - 实现装备挂载  
✅ **Action系统** - 控制角色动作  

**祝你创作愉快！** 🎨✨

